{"code":"import React, { useMemo, useState, memo, useEffect } from \"react\";\r\nimport { styled } from \"goober\";\r\nimport constructSnippet from \"../utils/constructSnippet\";\r\nimport ErrorDisplay from \"./ErrorDisplay\";\r\nconst Container = styled(\"div\") `\n  position: relative;\n  height: 100%;\n`;\r\nconst Frame = memo(({ id, snippet, transformJs, presets }) => {\r\n    const [code, setCode] = useState(\"\");\r\n    const [error, setError] = useState(null);\r\n    useMemo(() => {\r\n        try {\r\n            const code = constructSnippet(snippet, id, transformJs, presets);\r\n            setCode(code);\r\n            setError(null);\r\n        }\r\n        catch (err) {\r\n            setError(err.message);\r\n        }\r\n    }, [snippet, transformJs]);\r\n    useEffect(() => {\r\n        function waitForMessage() {\r\n            if (typeof window !== \"undefined\") {\r\n                window.addEventListener(\"message\", (data) => {\r\n                    if (data.data.source === `frame-${id}` &&\r\n                        data.data.message.type === \"error\") {\r\n                        setError(data.data.message.data);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        waitForMessage();\r\n    }, [id]);\r\n    return (React.createElement(Container, null,\r\n        React.createElement(\"iframe\", { height: \"100%\", width: \"100%\", title: \"example\", frameBorder: \"0\", srcDoc: code, loading: \"lazy\" }),\r\n        error && React.createElement(ErrorDisplay, { error: error })));\r\n});\r\nexport default Frame;\r\n//# sourceMappingURL=Frame.js.map","references":["/Users/bidishamondal/Desktop/Projects/frontend-code-playground/node_modules/@types/react/index.d.ts","/Users/bidishamondal/Desktop/Projects/frontend-code-playground/node_modules/goober/goober.d.ts","/Users/bidishamondal/Desktop/Projects/frontend-code-playground/playground/src/types.ts","/Users/bidishamondal/Desktop/Projects/frontend-code-playground/playground/src/utils/constructSnippet.ts","/Users/bidishamondal/Desktop/Projects/frontend-code-playground/playground/src/Result/ErrorDisplay.tsx"],"map":"{\"version\":3,\"file\":\"Frame.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Result/Frame.tsx\"],\"names\":[],\"mappings\":\"AAAA,OAAO,KAAK,EAAE,EAAM,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AACtE,OAAO,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAGhC,OAAO,gBAAgB,MAAM,2BAA2B,CAAC;AACzD,OAAO,YAAY,MAAM,gBAAgB,CAAC;AAE1C,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;;;CAG9B,CAAC;AASF,MAAM,KAAK,GAAe,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,EAAE,EAAE;IACvE,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IACrC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC,CAAC;IAExD,OAAO,CAAC,GAAG,EAAE;QACX,IAAI;YACF,MAAM,IAAI,GAAG,gBAAgB,CAAC,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC;YACjE,OAAO,CAAC,IAAI,CAAC,CAAC;YACd,QAAQ,CAAC,IAAI,CAAC,CAAC;SAChB;QAAC,OAAO,GAAG,EAAE;YACZ,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SACvB;IACH,CAAC,EAAE,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC,CAAC;IAE3B,SAAS,CAAC,GAAG,EAAE;QACb,SAAS,cAAc;YACrB,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;gBACjC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,IAAI,EAAE,EAAE;oBAC1C,IACE,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,EAAE,EAAE;wBAClC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,OAAO,EAClC;wBACA,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;qBAClC;gBACH,CAAC,CAAC,CAAC;aACJ;QACH,CAAC;QACD,cAAc,EAAE,CAAC;IACnB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAET,OAAO,CACL,oBAAC,SAAS;QACR,gCACE,MAAM,EAAC,MAAM,EACb,KAAK,EAAC,MAAM,EACZ,KAAK,EAAE,SAAS,EAChB,WAAW,EAAC,GAAG,EACf,MAAM,EAAE,IAAI,EACZ,OAAO,EAAC,MAAM,GACd;QACD,KAAK,IAAI,oBAAC,YAAY,IAAC,KAAK,EAAE,KAAK,GAAI,CAC9B,CACb,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,eAAe,KAAK,CAAC\"}","dts":{"name":"/Users/bidishamondal/Desktop/Projects/frontend-code-playground/playground/dist/Result/Frame.d.ts","writeByteOrderMark":false,"text":"import { FC } from \"react\";\r\nimport { ISnippet } from \"../types\";\r\ninterface IProps {\r\n    id: string | number;\r\n    snippet: ISnippet;\r\n    transformJs: boolean;\r\n    presets: string[];\r\n}\r\ndeclare const Frame: FC<IProps>;\r\nexport default Frame;\r\n"}}
